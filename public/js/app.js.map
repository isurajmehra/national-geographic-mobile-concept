{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/index.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","// slider\nvar App = {\n  init: function () {\n    this.slider()\n    this.mobileMenu()\n    this.searchBox()\n    this.interchange()\n  },\n  slider: function () {\n    function initTinySlider () {\n      var slider = tns({\n        container: '.home-slider-thumbs ul',\n        items: 3,\n        nav: false,\n        controls: true,\n        slideBy: 1,\n        autoplay: false,\n        controlsText: [\n          '<svg class=\"svg-icon svg-icon-arrow-left\"><use xlink:href=\"svgsprite.svg#arrow-left\"></use></svg>', \n          '<svg class=\"svg-icon svg-icon-arrow-right\"><use xlink:href=\"svgsprite.svg#arrow-right\"></use></svg>'\n        ]\n      })\n      if (slider) {\n        slider.events.on('transitionEnd', function (info) {\n          var id = info.container.children[info.index].getAttribute('data-id')\n          changeSlide(id)\n        })\n        document.querySelector('.home-slider-thumbs').classList.add('ready')\n        document.addEventListener('click', function (event) {\n          var el\n          if (el = Helpers.getParentClickedByClassName(event.target, 'tns-item')) {\n            var children = [].slice.call(slider.getInfo().container.children)\n            children.map(function (item, index) {\n              if (item === el) {\n                slider.goTo(index)\n              }\n            })\n          }\n        }, false);\n      }\n    }\n\n    function changeSlide (id) {\n      var items = [].slice.call(document.querySelectorAll('.home-slider-item'))\n      items.map(function (item) {\n        if (item.classList.contains('active')) {\n          item.classList.add('leaving')\n          setTimeout(function () {\n            item.classList.remove('active')\n            item.classList.remove('leaving')\n          }, 500)\n        }\n        if (item.getAttribute('data-id') === id) {\n          item.classList.add('entering')\n          setTimeout(function () {\n            item.classList.remove('entering')\n            item.classList.add('active')\n          }, 500)\n        }\n      })\n    }\n\n    window.addEventListener('load', initTinySlider)\n  },\n  mobileMenu () {\n    var body = document.querySelector('body')\n    var toggleMenu = function (e) {\n      e.preventDefault()\n      body.classList.toggle('mobile-menu-opened')\n    }\n    document.querySelector('.open-menu').addEventListener('click', toggleMenu)\n    document.querySelector('.close-menu').addEventListener('click', toggleMenu)\n    document.querySelector('.mobile-menu-overlay').addEventListener('click', toggleMenu)\n  },\n  searchBox () {\n    var body = document.querySelector('body')\n    var toggleSearchBox = function (e) {\n      e.preventDefault()\n      body.classList.toggle('search-box-opened')\n      document.querySelector('.search-box form input').focus()\n    }\n    var onSubmit = function (e) {\n      e.target.classList.add('sending')\n    }\n    document.querySelector('.open-search').addEventListener('click', toggleSearchBox)\n    document.querySelector('.search-box form').addEventListener('submit', onSubmit)\n  },\n  interchange () {\n    var elements = [].slice.call(document.querySelectorAll('[data-interchange]'))\n    var breakpoints = {\n      small: 768,\n      medium: 1024\n    }\n    var window_width = Number(window.innerWidth)\n    var delay = 300\n    var interval\n\n    var checkItem = function (element, width) {\n      var breakpoint = 'large'\n      if (width <= breakpoints.small) {\n        breakpoint = 'small'\n      } else if (width <= breakpoints.medium) {\n        breakpoint = 'medium'\n      }\n      var data = element.getAttribute('data-interchange').split(',').map(function (item) {\n        return item.split(':')\n      })\n      data.map(function (item) {\n        if (item[1] === breakpoint) {\n          element.style.backgroundImage = 'url(' + item[0] + ')'\n        }\n      })\n    }\n\n    var onResize = function (e) {\n      clearTimeout(interval)\n      interval = setTimeout(function () {\n        window_width = Number(window.innerWidth)\n        elements.map(function (element) {\n          checkItem(element, window_width)\n        })\n      }, delay)\n    }\n    \n    elements.map(function (element) {\n      checkItem(element, window_width)\n    })\n\n    window.addEventListener('resize', onResize)\n  }\n}\n\nvar Helpers = {\n  getParentClickedByClassName: function getParentClickedByClassName (el, className, max, count) {\n    if (!count) count = 1\n    if (!max) max = 3\n    if (count < max) {\n      if (el.classList && el.classList.contains(className)) return el;\n      if (el && el.parentNode) return getParentClickedByClassName(el.parentNode, className, max, count + 1);\n      return false;\n    }\n    return false;\n  }\n}\n\nApp.init()\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBO0FBQ0EsSUFBSSxNQUFNO0FBQ1IsUUFBTSxnQkFBWTtBQUNoQixTQUFLLE1BQUw7QUFDQSxTQUFLLFVBQUw7QUFDQSxTQUFLLFNBQUw7QUFDQSxTQUFLLFdBQUw7QUFDRCxHQU5PO0FBT1IsVUFBUSxrQkFBWTtBQUNsQixhQUFTLGNBQVQsR0FBMkI7QUFDekIsVUFBSSxTQUFTLElBQUk7QUFDZixtQkFBVyx3QkFESTtBQUVmLGVBQU8sQ0FGUTtBQUdmLGFBQUssS0FIVTtBQUlmLGtCQUFVLElBSks7QUFLZixpQkFBUyxDQUxNO0FBTWYsa0JBQVUsS0FOSztBQU9mLHNCQUFjLENBQ1osbUdBRFksRUFFWixxR0FGWTtBQVBDLE9BQUosQ0FBYjtBQVlBLFVBQUksTUFBSixFQUFZO0FBQ1YsZUFBTyxNQUFQLENBQWMsRUFBZCxDQUFpQixlQUFqQixFQUFrQyxVQUFVLElBQVYsRUFBZ0I7QUFDaEQsY0FBSSxLQUFLLEtBQUssU0FBTCxDQUFlLFFBQWYsQ0FBd0IsS0FBSyxLQUE3QixFQUFvQyxZQUFwQyxDQUFpRCxTQUFqRCxDQUFUO0FBQ0Esc0JBQVksRUFBWjtBQUNELFNBSEQ7QUFJQSxpQkFBUyxhQUFULENBQXVCLHFCQUF2QixFQUE4QyxTQUE5QyxDQUF3RCxHQUF4RCxDQUE0RCxPQUE1RDtBQUNBLGlCQUFTLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFVBQVUsS0FBVixFQUFpQjtBQUNsRCxjQUFJLEVBQUo7QUFDQSxjQUFJLEtBQUssUUFBUSwyQkFBUixDQUFvQyxNQUFNLE1BQTFDLEVBQWtELFVBQWxELENBQVQsRUFBd0U7QUFDdEUsZ0JBQUksV0FBVyxHQUFHLEtBQUgsQ0FBUyxJQUFULENBQWMsT0FBTyxPQUFQLEdBQWlCLFNBQWpCLENBQTJCLFFBQXpDLENBQWY7QUFDQSxxQkFBUyxHQUFU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QXNDLEVBQXRDLEVBQTBDLFNBQTFDLEVBQXFELEdBQXJELEVBQTBELEtBQTFELEVBQWlFO0FBQzVGLFFBQUksQ0FBQyxLQUFMLEVBQVksUUFBUSxDQUFSO0FBQ1osUUFBSSxDQUFDLEdBQUwsRUFBVSxNQUFNLENBQU47QUFDVixRQUFJLFFBQVEsR0FBWixFQUFpQjtBQUNmLFVBQUksR0FBRyxTQUFILElBQWdCLEdBQUcsU0FBSCxDQUFhLFFBQWIsQ0FBc0IsU0FBdEIsQ0FBcEIsRUFBc0QsT0FBTyxFQUFQO0FBQ3RELFVBQUksTUFBTSxHQUFHLFVBQWIsRUFBeUIsT0FBTyw0QkFBNEIsR0FBRyxVQUEvQixFQUEyQyxTQUEzQyxFQUFzRCxHQUF0RCxFQUEyRCxRQUFRLENBQW5FLENBQVA7QUFDekIsYUFBTyxLQUFQO0FBQ0Q7QUFDRCxXQUFPLEtBQVA7QUFDRDtBQVZXLENBQWQ7O0FBYUEsSUFBSSxJQUFKIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc31yZXR1cm4gZX0pKCkiLCIvLyBzbGlkZXJcbnZhciBBcHAgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNsaWRlcigpXG4gICAgdGhpcy5tb2JpbGVNZW51KClcbiAgICB0aGlzLnNlYXJjaEJveCgpXG4gICAgdGhpcy5pbnRlcmNoYW5nZSgpXG4gIH0sXG4gIHNsaWRlcjogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGluaXRUaW55U2xpZGVyICgpIHtcbiAgICAgIHZhciBzbGlkZXIgPSB0bnMoe1xuICAgICAgICBjb250YWluZXI6ICcuaG9tZS1zbGlkZXItdGh1bWJzIHVsJyxcbiAgICAgICAgaXRlbXM6IDMsXG4gICAgICAgIG5hdjogZmFsc2UsXG4gICAgICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgICAgICBzbGlkZUJ5OiAxLFxuICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgIGNvbnRyb2xzVGV4dDogW1xuICAgICAgICAgICc8c3ZnIGNsYXNzPVwic3ZnLWljb24gc3ZnLWljb24tYXJyb3ctbGVmdFwiPjx1c2UgeGxpbms6aHJlZj1cInN2Z3Nwcml0ZS5zdmcjYXJyb3ctbGVmdFwiPjwvdXNlPjwvc3ZnPicsIFxuICAgICAgICAgICc8c3ZnIGNsYXNzPVwic3ZnLWljb24gc3ZnLWljb24tYXJyb3ctcmlnaHRcIj48dXNlIHhsaW5rOmhyZWY9XCJzdmdzcHJpdGUuc3ZnI2Fycm93LXJpZ2h0XCI+PC91c2U+PC9zdmc+J1xuICAgICAgICBdXG4gICAgICB9KVxuICAgICAgaWYgKHNsaWRlcikge1xuICAgICAgICBzbGlkZXIuZXZlbnRzLm9uKCd0cmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICB2YXIgaWQgPSBpbmZvLmNvbnRhaW5lci5jaGlsZHJlbltpbmZvLmluZGV4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKVxuICAgICAgICAgIGNoYW5nZVNsaWRlKGlkKVxuICAgICAgICB9KVxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZS1zbGlkZXItdGh1bWJzJykuY2xhc3NMaXN0LmFkZCgncmVhZHknKVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciBlbFxuICAgICAgICAgIGlmIChlbCA9IEhlbHBlcnMuZ2V0UGFyZW50Q2xpY2tlZEJ5Q2xhc3NOYW1lKGV2ZW50LnRhcmdldCwgJ3Rucy1pdGVtJykpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IFtdLnNsaWNlLmNhbGwoc2xpZGVyLmdldEluZm8oKS5jb250YWluZXIuY2hpbGRyZW4pXG4gICAgICAgICAgICBjaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgIGlmIChpdGVtID09PSBlbCkge1xuICAgICAgICAgICAgICAgIHNsaWRlci5nb1RvKGluZGV4KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVNsaWRlIChpZCkge1xuICAgICAgdmFyIGl0ZW1zID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG9tZS1zbGlkZXItaXRlbScpKVxuICAgICAgaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2xlYXZpbmcnKVxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdsZWF2aW5nJylcbiAgICAgICAgICB9LCA1MDApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IGlkKSB7XG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdlbnRlcmluZycpXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2VudGVyaW5nJylcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICB9LCA1MDApXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0VGlueVNsaWRlcilcbiAgfSxcbiAgbW9iaWxlTWVudSAoKSB7XG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JylcbiAgICB2YXIgdG9nZ2xlTWVudSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbW9iaWxlLW1lbnUtb3BlbmVkJylcbiAgICB9XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wZW4tbWVudScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSlcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtbWVudScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSlcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLW1lbnUtb3ZlcmxheScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSlcbiAgfSxcbiAgc2VhcmNoQm94ICgpIHtcbiAgICB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuICAgIHZhciB0b2dnbGVTZWFyY2hCb3ggPSBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3NlYXJjaC1ib3gtb3BlbmVkJylcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYm94IGZvcm0gaW5wdXQnKS5mb2N1cygpXG4gICAgfVxuICAgIHZhciBvblN1Ym1pdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzZW5kaW5nJylcbiAgICB9XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wZW4tc2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTZWFyY2hCb3gpXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1ib3ggZm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIG9uU3VibWl0KVxuICB9LFxuICBpbnRlcmNoYW5nZSAoKSB7XG4gICAgdmFyIGVsZW1lbnRzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pbnRlcmNoYW5nZV0nKSlcbiAgICB2YXIgYnJlYWtwb2ludHMgPSB7XG4gICAgICBzbWFsbDogNzY4LFxuICAgICAgbWVkaXVtOiAxMDI0XG4gICAgfVxuICAgIHZhciB3aW5kb3dfd2lkdGggPSBOdW1iZXIod2luZG93LmlubmVyV2lkdGgpXG4gICAgdmFyIGRlbGF5ID0gMzAwXG4gICAgdmFyIGludGVydmFsXG5cbiAgICB2YXIgY2hlY2tJdGVtID0gZnVuY3Rpb24gKGVsZW1lbnQsIHdpZHRoKSB7XG4gICAgICB2YXIgYnJlYWtwb2ludCA9ICdsYXJnZSdcbiAgICAgIGlmICh3aWR0aCA8PSBicmVha3BvaW50cy5zbWFsbCkge1xuICAgICAgICBicmVha3BvaW50ID0gJ3NtYWxsJ1xuICAgICAgfSBlbHNlIGlmICh3aWR0aCA8PSBicmVha3BvaW50cy5tZWRpdW0pIHtcbiAgICAgICAgYnJlYWtwb2ludCA9ICdtZWRpdW0nXG4gICAgICB9XG4gICAgICB2YXIgZGF0YSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWludGVyY2hhbmdlJykuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uc3BsaXQoJzonKVxuICAgICAgfSlcbiAgICAgIGRhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtWzFdID09PSBicmVha3BvaW50KSB7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBpdGVtWzBdICsgJyknXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdmFyIG9uUmVzaXplID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNsZWFyVGltZW91dChpbnRlcnZhbClcbiAgICAgIGludGVydmFsID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvd193aWR0aCA9IE51bWJlcih3aW5kb3cuaW5uZXJXaWR0aClcbiAgICAgICAgZWxlbWVudHMubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgY2hlY2tJdGVtKGVsZW1lbnQsIHdpbmRvd193aWR0aClcbiAgICAgICAgfSlcbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgICBcbiAgICBlbGVtZW50cy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgIGNoZWNrSXRlbShlbGVtZW50LCB3aW5kb3dfd2lkdGgpXG4gICAgfSlcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSlcbiAgfVxufVxuXG52YXIgSGVscGVycyA9IHtcbiAgZ2V0UGFyZW50Q2xpY2tlZEJ5Q2xhc3NOYW1lOiBmdW5jdGlvbiBnZXRQYXJlbnRDbGlja2VkQnlDbGFzc05hbWUgKGVsLCBjbGFzc05hbWUsIG1heCwgY291bnQpIHtcbiAgICBpZiAoIWNvdW50KSBjb3VudCA9IDFcbiAgICBpZiAoIW1heCkgbWF4ID0gM1xuICAgIGlmIChjb3VudCA8IG1heCkge1xuICAgICAgaWYgKGVsLmNsYXNzTGlzdCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIGVsO1xuICAgICAgaWYgKGVsICYmIGVsLnBhcmVudE5vZGUpIHJldHVybiBnZXRQYXJlbnRDbGlja2VkQnlDbGFzc05hbWUoZWwucGFyZW50Tm9kZSwgY2xhc3NOYW1lLCBtYXgsIGNvdW50ICsgMSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5BcHAuaW5pdCgpXG4iXX0="}